setup:

docker stop redis1 && docker rm redis1 && docker run --name redis1 -d=true -v /var/data/redis:/data redis redis-server --appendonly yes

chat1:
docker pull abinnewies/chat-webserver && docker stop web1 && docker rm web1 && docker run -p 80:8080 --name web1 --link redis1:redis1 -d abinnewies/chat-webserver

docker run -it --link redis1:redis1 --rm redis sh -c 'exec redis-cli -h "$REDIS1_PORT_6379_TCP_ADDR" -p "$REDIS1_PORT_6379_TCP_PORT"'


docker pull abinnewies/chat-server && docker stop chat1 && docker rm chat1 && docker run -p 49165:49165 --name chat1 --link redis1:redis1 -h chat1 -v /var/data/mnesia:/var/data/mnesia -d abinnewies/chat-server /usr/src/app/run.sh chat1

chat2:
docker pull abinnewies/chat-webserver && docker stop chat-webserver && docker rm chat-webserver && docker run -p 80:8080 --name chat-webserver -d abinnewies/chat-webserver

docker pull abinnewies/chat-server && docker stop chat-server && docker rm chat-server && docker run -p 4369:4369 -p 9001-9005:9001-9005 -p 49165:49165 --name chat-server -h chat2.drtyhbo.com -v /var/data/mnesia:/var/data/mnesia -d abinnewies/chat-server /usr/src/app/run.sh chat2

sudo docker run -it --link chat-redis:chat-redis --rm redis sh -c 'exec redis-cli -h "$CHAT_REDIS_PORT_6379_TCP_ADDR" -p "$CHAT_REDIS_PORT_6379_TCP_PORT"'